const a0_0x39b937=a0_0x473e;(function(_0x20c058,_0x1e40de){const _0x2734ae=a0_0x473e,_0x3a3399=_0x20c058();while(!![]){try{const _0x255e18=parseInt(_0x2734ae(0xbe))/0x1*(parseInt(_0x2734ae(0xbf))/0x2)+-parseInt(_0x2734ae(0x103))/0x3*(-parseInt(_0x2734ae(0xb0))/0x4)+parseInt(_0x2734ae(0xbb))/0x5+-parseInt(_0x2734ae(0x108))/0x6*(parseInt(_0x2734ae(0xac))/0x7)+-parseInt(_0x2734ae(0xfd))/0x8*(-parseInt(_0x2734ae(0xf4))/0x9)+-parseInt(_0x2734ae(0xd9))/0xa+parseInt(_0x2734ae(0xeb))/0xb*(-parseInt(_0x2734ae(0xad))/0xc);if(_0x255e18===_0x1e40de)break;else _0x3a3399['push'](_0x3a3399['shift']());}catch(_0x21a992){_0x3a3399['push'](_0x3a3399['shift']());}}}(a0_0x3934,0xebde3));function a0_0x473e(_0x49ca3a,_0x51ed11){const _0x393468=a0_0x3934();return a0_0x473e=function(_0x473ef7,_0x310785){_0x473ef7=_0x473ef7-0xa8;let _0x424d9b=_0x393468[_0x473ef7];return _0x424d9b;},a0_0x473e(_0x49ca3a,_0x51ed11);}const {isJidBroadcast,isJidGroup,isJidNewsletter}=require(a0_0x39b937(0x10a)),fs=require(a0_0x39b937(0x115)),path=require('path'),{DataTypes}=require('sequelize'),{DATABASE}=require(a0_0x39b937(0xdc)),storeDir=path[a0_0x39b937(0xf5)](process[a0_0x39b937(0xde)](),a0_0x39b937(0x105)),readJSON=async _0x183fe9=>{const _0x48c92=a0_0x39b937,_0xf464e6={'NPakG':_0x48c92(0xdf)};try{const _0x14779b=path[_0x48c92(0xf5)](storeDir,_0x183fe9),_0x43eb56=await fs[_0x48c92(0x111)](_0x14779b,_0xf464e6[_0x48c92(0xea)]);return JSON[_0x48c92(0xce)](_0x43eb56);}catch{return[];}},writeJSON=async(_0x25bcdf,_0x559b88)=>{const _0x1d54a8=a0_0x39b937,_0x6bd8cb=path[_0x1d54a8(0xf5)](storeDir,_0x25bcdf);await fs[_0x1d54a8(0x10c)](storeDir,{'recursive':!![]}),await fs[_0x1d54a8(0xe2)](_0x6bd8cb,JSON[_0x1d54a8(0xfe)](_0x559b88,null,0x2));},saveContact=async(_0x342efa,_0x52f903)=>{const _0x2fe7a1=a0_0x39b937,_0x5606bc={'MlPTu':function(_0x160526,_0x97c084){return _0x160526===_0x97c084;},'yQIBt':function(_0x590832,_0x163139){return _0x590832||_0x163139;},'QXTww':function(_0x192dd4,_0x5d5fc7){return _0x192dd4(_0x5d5fc7);},'IRKsn':function(_0x2c6f76,_0x9f1432){return _0x2c6f76(_0x9f1432);},'mgtMc':'contact.json','LquTW':function(_0x835506,_0x3f97e7){return _0x835506>_0x3f97e7;},'PlXlS':_0x2fe7a1(0xe6),'ZhjUg':_0x2fe7a1(0xcc),'qYcwF':function(_0x595903,_0x5b87ef,_0x357148){return _0x595903(_0x5b87ef,_0x357148);}};if(_0x5606bc[_0x2fe7a1(0x110)](!_0x342efa,!_0x52f903)||_0x5606bc[_0x2fe7a1(0x119)](isJidGroup,_0x342efa)||_0x5606bc[_0x2fe7a1(0x119)](isJidBroadcast,_0x342efa)||_0x5606bc['IRKsn'](isJidNewsletter,_0x342efa))return;const _0x1ee140=await _0x5606bc['IRKsn'](readJSON,_0x5606bc['mgtMc']),_0x3c81de=_0x1ee140[_0x2fe7a1(0xbc)](_0x357db9=>_0x357db9['jid']===_0x342efa);if(_0x5606bc[_0x2fe7a1(0xe4)](_0x3c81de,-0x1)){if(_0x5606bc[_0x2fe7a1(0xb9)](_0x5606bc[_0x2fe7a1(0xf1)],_0x5606bc[_0x2fe7a1(0xd3)])){const _0x5cd95c=_0x4cd6e7[_0x2fe7a1(0xfc)](_0xe90f6e=>_0xe90f6e[_0x2fe7a1(0xd7)]===_0xaf22a4&&_0xe90f6e['sender']===_0x5cf69a['id']);return!_0x5cd95c||_0x5606bc['MlPTu'](_0x5cd95c['count'],0x0);}else _0x1ee140[_0x3c81de][_0x2fe7a1(0xe1)]=_0x52f903;}else _0x1ee140[_0x2fe7a1(0x112)]({'jid':_0x342efa,'name':_0x52f903});await _0x5606bc[_0x2fe7a1(0x10f)](writeJSON,_0x2fe7a1(0xc0),_0x1ee140);},getContacts=async()=>{const _0x2fb05a=a0_0x39b937,_0x540cd6={'pPhnH':function(_0x363453,_0x3d9146){return _0x363453(_0x3d9146);},'IzkDD':'contact.json'};try{const _0x38068c=await _0x540cd6[_0x2fb05a(0x118)](readJSON,_0x540cd6[_0x2fb05a(0xaa)]);return _0x38068c;}catch(_0x42f459){return[];}},saveMessage=async _0x65b933=>{const _0x385ba4=a0_0x39b937,_0xc0c91a={'BnQfK':function(_0x3f1dfc,_0x5dc38e){return _0x3f1dfc(_0x5dc38e);},'ZruEH':function(_0x5eb9d6,_0x594784){return _0x5eb9d6||_0x594784;},'FctRL':function(_0x9d873c,_0x51745e){return _0x9d873c(_0x51745e);},'UfGWh':'message.json','sAvwF':function(_0x326e2d,_0x4a2d0d){return _0x326e2d*_0x4a2d0d;},'oGCiJ':function(_0x14179d,_0x2732a9){return _0x14179d>_0x2732a9;},'eRklz':function(_0x1c7bdc,_0x179797){return _0x1c7bdc!==_0x179797;},'jiwdj':'LmtlP'},_0x400968=_0x65b933[_0x385ba4(0xb5)][_0x385ba4(0xd5)],_0x47480a=_0x65b933['key']['id'];if(_0xc0c91a[_0x385ba4(0xff)](!_0x47480a,!_0x400968)||!_0x65b933)return;await saveContact(_0x65b933[_0x385ba4(0xae)],_0x65b933[_0x385ba4(0xf9)]);const _0x1b3cb4=await _0xc0c91a[_0x385ba4(0xb4)](readJSON,_0xc0c91a[_0x385ba4(0xcd)]),_0x54a1c6=_0x1b3cb4[_0x385ba4(0xbc)](_0xb9e4b8=>_0xb9e4b8['id']===_0x47480a&&_0xb9e4b8[_0x385ba4(0xd7)]===_0x400968),_0x49d997=_0x65b933['messageTimestamp']?_0xc0c91a[_0x385ba4(0xd1)](_0x65b933['messageTimestamp'],0x3e8):Date[_0x385ba4(0xc6)]();if(_0xc0c91a[_0x385ba4(0xaf)](_0x54a1c6,-0x1)){if(_0xc0c91a['eRklz'](_0x385ba4(0xc8),_0xc0c91a[_0x385ba4(0xc7)]))_0x1b3cb4[_0x54a1c6][_0x385ba4(0xba)]=_0x65b933,_0x1b3cb4[_0x54a1c6][_0x385ba4(0xca)]=_0x49d997;else return _0x3dccbf[_0x385ba4(0xda)]([_0xc0c91a[_0x385ba4(0x106)](_0x47fd4f,_0x45cd4c),_0xc0c91a[_0x385ba4(0x106)](_0x5f4995,_0x550570)]);}else _0x1b3cb4[_0x385ba4(0x112)]({'id':_0x47480a,'jid':_0x400968,'message':_0x65b933,'timestamp':_0x49d997});await writeJSON(_0xc0c91a[_0x385ba4(0xcd)],_0x1b3cb4);},loadMessage=async _0x3436b9=>{const _0x52499a=a0_0x39b937,_0x45f872={'IHmge':'message.json'};if(!_0x3436b9)return null;const _0x2fb124=await readJSON(_0x45f872[_0x52499a(0xcb)]);return _0x2fb124['find'](_0x1134c1=>_0x1134c1['id']===_0x3436b9)||null;},getName=async _0x398cf3=>{const _0x1c9822=a0_0x39b937,_0x305a86={'vAebk':function(_0x13eecd,_0x476058){return _0x13eecd(_0x476058);},'nxCwA':'contact.json'},_0x298781=await _0x305a86[_0x1c9822(0x101)](readJSON,_0x305a86[_0x1c9822(0x116)]),_0x478622=_0x298781['find'](_0xade149=>_0xade149[_0x1c9822(0xd7)]===_0x398cf3);return _0x478622?_0x478622[_0x1c9822(0xe1)]:_0x398cf3[_0x1c9822(0xed)]('@')[0x0]['replace'](/_/g,'\x20');},saveGroupMetadata=async(_0x288d34,_0x413e86)=>{const _0x4ebbff=a0_0x39b937,_0x19ef3d={'vHLkV':function(_0x1f1aa7,_0x272ee0){return _0x1f1aa7(_0x272ee0);},'iaDec':function(_0x1b0bd6,_0x5c6a83){return _0x1b0bd6*_0x5c6a83;},'KFkyy':function(_0x47739e,_0x5964e0){return _0x47739e*_0x5964e0;},'YMrfJ':function(_0x4db9b1,_0x4a9a5f){return _0x4db9b1(_0x4a9a5f);},'kKPmM':_0x4ebbff(0xe3),'yJMpT':function(_0x1ad3fe,_0x2f5482){return _0x1ad3fe>_0x2f5482;},'rDKTj':function(_0x1e968e,_0x3a6008){return _0x1e968e!==_0x3a6008;},'YHSPV':_0x4ebbff(0xb6),'pxMNC':_0x4ebbff(0x109),'OPcpK':function(_0x4fbc5a,_0x6b5f19,_0x2fcf6a){return _0x4fbc5a(_0x6b5f19,_0x2fcf6a);}};if(!_0x19ef3d[_0x4ebbff(0xab)](isJidGroup,_0x288d34))return;const _0x4323ce=await _0x413e86[_0x4ebbff(0x114)](_0x288d34),_0x51e5f1={'jid':_0x4323ce['id'],'subject':_0x4323ce[_0x4ebbff(0xf8)],'subjectOwner':_0x4323ce[_0x4ebbff(0xa8)],'subjectTime':_0x4323ce[_0x4ebbff(0xc3)]?new Date(_0x19ef3d[_0x4ebbff(0xc2)](_0x4323ce[_0x4ebbff(0xc3)],0x3e8))['toISOString']():null,'size':_0x4323ce[_0x4ebbff(0xc9)],'creation':_0x4323ce[_0x4ebbff(0x107)]?new Date(_0x19ef3d['KFkyy'](_0x4323ce[_0x4ebbff(0x107)],0x3e8))[_0x4ebbff(0xb3)]():null,'owner':_0x4323ce[_0x4ebbff(0xb1)],'desc':_0x4323ce['desc'],'descId':_0x4323ce[_0x4ebbff(0xe7)],'linkedParent':_0x4323ce[_0x4ebbff(0xe9)],'restrict':_0x4323ce[_0x4ebbff(0x102)],'announce':_0x4323ce[_0x4ebbff(0xe0)],'isCommunity':_0x4323ce['isCommunity'],'isCommunityAnnounce':_0x4323ce[_0x4ebbff(0xc4)],'joinApprovalMode':_0x4323ce['joinApprovalMode'],'memberAddMode':_0x4323ce['memberAddMode'],'ephemeralDuration':_0x4323ce['ephemeralDuration']},_0xa1aa8d=await _0x19ef3d[_0x4ebbff(0xfb)](readJSON,_0x19ef3d[_0x4ebbff(0xb8)]),_0x6e44fb=_0xa1aa8d[_0x4ebbff(0xbc)](_0x44aaef=>_0x44aaef[_0x4ebbff(0xd7)]===_0x288d34);_0x19ef3d[_0x4ebbff(0x104)](_0x6e44fb,-0x1)?_0x19ef3d[_0x4ebbff(0xc5)](_0x19ef3d[_0x4ebbff(0xb7)],_0x19ef3d[_0x4ebbff(0xdd)])?_0xa1aa8d[_0x6e44fb]=_0x51e5f1:_0x504dce[_0x527fd7]=_0x5f0b07:_0xa1aa8d[_0x4ebbff(0x112)](_0x51e5f1);await _0x19ef3d[_0x4ebbff(0xd8)](writeJSON,_0x19ef3d['kKPmM'],_0xa1aa8d);const _0x3878f5=_0x4323ce[_0x4ebbff(0xd2)][_0x4ebbff(0xd4)](_0x16bb7d=>({'jid':_0x288d34,'participantId':_0x16bb7d['id'],'admin':_0x16bb7d[_0x4ebbff(0x117)]}));await _0x19ef3d[_0x4ebbff(0xd8)](writeJSON,_0x288d34+'_participants.json',_0x3878f5);},getGroupMetadata=async _0x4b5e49=>{const _0x4c9efb=a0_0x39b937,_0x1415e8={'nWXkF':_0x4c9efb(0xe3),'dfARE':function(_0xb05e68,_0x559d62){return _0xb05e68(_0x559d62);}};if(!isJidGroup(_0x4b5e49))return null;const _0x16ca48=await readJSON(_0x1415e8[_0x4c9efb(0xee)]),_0x5e78f1=_0x16ca48[_0x4c9efb(0xfc)](_0xe71c74=>_0xe71c74['jid']===_0x4b5e49);if(!_0x5e78f1)return null;const _0x549c69=await _0x1415e8[_0x4c9efb(0xf2)](readJSON,_0x4b5e49+_0x4c9efb(0xc1));return{..._0x5e78f1,'participants':_0x549c69};},saveMessageCount=async _0x4d3c2b=>{const _0x30aaad=a0_0x39b937,_0x3441e4={'MecqU':function(_0xfe1919,_0x33af36){return _0xfe1919(_0x33af36);},'OBslV':_0x30aaad(0xdb),'TGNeu':function(_0x2f2f12,_0x52505d){return _0x2f2f12===_0x52505d;},'CAuuj':_0x30aaad(0xfa),'TvkVi':function(_0xf29abe,_0x301f92,_0x38b212){return _0xf29abe(_0x301f92,_0x38b212);}};if(!_0x4d3c2b)return;const _0x314bf2=_0x4d3c2b['key']['remoteJid'],_0x198428=_0x4d3c2b['key']['participant']||_0x4d3c2b[_0x30aaad(0xae)];if(!_0x314bf2||!_0x198428||!isJidGroup(_0x314bf2))return;const _0x5cb9d0=await _0x3441e4[_0x30aaad(0x10b)](readJSON,_0x3441e4[_0x30aaad(0xef)]),_0x25c471=_0x5cb9d0[_0x30aaad(0xbc)](_0x3dc642=>_0x3dc642[_0x30aaad(0xd7)]===_0x314bf2&&_0x3dc642[_0x30aaad(0xae)]===_0x198428);_0x25c471>-0x1?_0x5cb9d0[_0x25c471]['count']+=0x1:_0x3441e4[_0x30aaad(0xcf)]('FHEfl',_0x3441e4['CAuuj'])?_0x5cb9d0[_0x30aaad(0x112)]({'jid':_0x314bf2,'sender':_0x198428,'count':0x1}):_0x24478b[_0x30aaad(0x112)]({'id':_0x2bbb2d,'jid':_0x804887,'message':_0x34d96b,'timestamp':_0x42fab8}),await _0x3441e4[_0x30aaad(0x100)](writeJSON,_0x3441e4['OBslV'],_0x5cb9d0);},getInactiveGroupMembers=async _0x4fded3=>{const _0x3c8b51=a0_0x39b937,_0x340fa0={'Zogvv':function(_0x55e0d3,_0x128eb1){return _0x55e0d3===_0x128eb1;},'jnAAr':_0x3c8b51(0xd0),'qEQRi':'ZuRWQ','TIblc':function(_0x1fbe80,_0x539ec1){return _0x1fbe80(_0x539ec1);},'mlVks':function(_0xc83f93,_0x531b60){return _0xc83f93(_0x531b60);},'fJPSN':_0x3c8b51(0xdb)};if(!_0x340fa0[_0x3c8b51(0xbd)](isJidGroup,_0x4fded3))return[];const _0x454f4e=await getGroupMetadata(_0x4fded3);if(!_0x454f4e)return[];const _0x4f2f84=await _0x340fa0[_0x3c8b51(0xd6)](readJSON,_0x340fa0[_0x3c8b51(0x113)]),_0x3b8edd=_0x454f4e[_0x3c8b51(0xd2)][_0x3c8b51(0xe8)](_0x51a8b3=>{const _0x57d8bc=_0x3c8b51;if(_0x340fa0['Zogvv'](_0x340fa0[_0x57d8bc(0x11a)],_0x340fa0[_0x57d8bc(0xb2)]))_0x2ea2d6['push']({'jid':_0xda31a3,'name':_0x4b4a8b});else{const _0x372dab=_0x4f2f84['find'](_0x576648=>_0x576648['jid']===_0x4fded3&&_0x576648[_0x57d8bc(0xae)]===_0x51a8b3['id']);return!_0x372dab||_0x372dab[_0x57d8bc(0xf7)]===0x0;}});return _0x3b8edd['map'](_0xf26b90=>_0xf26b90['id']);},getGroupMembersMessageCount=async _0x3d35c7=>{const _0xe8cd72=a0_0x39b937,_0x77f69a={'YtxIA':function(_0x315458,_0x16d9ca){return _0x315458(_0x16d9ca);}};if(!_0x77f69a[_0xe8cd72(0xf0)](isJidGroup,_0x3d35c7))return[];const _0x1e0b01=await readJSON(_0xe8cd72(0xdb)),_0x2bab92=_0x1e0b01[_0xe8cd72(0xe8)](_0x3ca6cc=>_0x3ca6cc[_0xe8cd72(0xd7)]===_0x3d35c7&&_0x3ca6cc[_0xe8cd72(0xf7)]>0x0)[_0xe8cd72(0xec)]((_0x52d033,_0x1ec7fa)=>_0x1ec7fa[_0xe8cd72(0xf7)]-_0x52d033[_0xe8cd72(0xf7)]);return Promise[_0xe8cd72(0xda)](_0x2bab92['map'](async _0x996451=>({'sender':_0x996451[_0xe8cd72(0xae)],'name':await getName(_0x996451[_0xe8cd72(0xae)]),'messageCount':_0x996451[_0xe8cd72(0xf7)]})));},getChatSummary=async()=>{const _0x225ce0=a0_0x39b937,_0x27931f={'YbjMb':function(_0xb8d3d5,_0x5ab542){return _0xb8d3d5!==_0x5ab542;},'eOrns':_0x225ce0(0xf6),'WaSjn':'pyDNO','oyeaz':function(_0x4050e7,_0x965699){return _0x4050e7(_0x965699);},'VICPq':function(_0x5b0996,_0xc37db){return _0x5b0996(_0xc37db);}},_0x52b491=await readJSON('message.json'),_0x455eb6=[...new Set(_0x52b491[_0x225ce0(0xd4)](_0x4f47c7=>_0x4f47c7[_0x225ce0(0xd7)]))],_0x3473f4=await Promise[_0x225ce0(0xda)](_0x455eb6['map'](async _0x2792fd=>{const _0x3181c3=_0x225ce0;if(_0x27931f[_0x3181c3(0xe5)](_0x27931f['eOrns'],_0x27931f['WaSjn'])){const _0x15cf81=_0x52b491[_0x3181c3(0xe8)](_0x378d6c=>_0x378d6c[_0x3181c3(0xd7)]===_0x2792fd),_0x226740=_0x15cf81['length'],_0x1c2860=_0x15cf81[_0x3181c3(0xec)]((_0x277efb,_0x7de644)=>new Date(_0x7de644[_0x3181c3(0xca)])-new Date(_0x277efb[_0x3181c3(0xca)]))[0x0],_0x25f9f9=_0x27931f[_0x3181c3(0xf3)](isJidGroup,_0x2792fd)?_0x2792fd:await _0x27931f[_0x3181c3(0x10e)](getName,_0x2792fd);return{'jid':_0x2792fd,'name':_0x25f9f9,'messageCount':_0x226740,'lastMessageTimestamp':_0x1c2860?_0x1c2860[_0x3181c3(0xca)]:null};}else _0x3bf7ac[_0x3181c3(0x112)]({'jid':_0x266dca,'sender':_0x355cd9,'count':0x1});}));return _0x3473f4['sort']((_0x1ebbbf,_0x18895a)=>new Date(_0x18895a[_0x225ce0(0x10d)])-new Date(_0x1ebbbf[_0x225ce0(0x10d)]));},saveMessageV1=saveMessage,saveMessageV2=_0x53cfb3=>{const _0x336865=a0_0x39b937,_0xcbaeef={'vqJdq':function(_0x1f60cc,_0x4ff622){return _0x1f60cc(_0x4ff622);}};return Promise[_0x336865(0xda)]([_0xcbaeef['vqJdq'](saveMessageV1,_0x53cfb3),saveMessageCount(_0x53cfb3)]);};function a0_0x3934(){const _0x266032=['participants','ZhjUg','map','remoteJid','mlVks','jid','OPcpK','9577580jcDUwF','all','message_count.json','../lib/database','pxMNC','cwd','utf8','announce','name','writeFile','metadata.json','LquTW','YbjMb','BgtnM','descId','filter','linkedParent','NPakG','2629uznhcf','sort','split','nWXkF','OBslV','YtxIA','PlXlS','dfARE','oyeaz','20295lSWIsa','join','wiUKi','count','subject','pushName','FHEfl','YMrfJ','find','376yxWrDK','stringify','ZruEH','TvkVi','vAebk','restrict','2479305TYkOQi','yJMpT','store','BnQfK','creation','1404wlmgtW','kwNGP','@whiskeysockets/baileys','MecqU','mkdir','lastMessageTimestamp','VICPq','qYcwF','yQIBt','readFile','push','fJPSN','groupMetadata','fs/promises','nxCwA','admin','pPhnH','QXTww','jnAAr','subjectOwner','exports','IzkDD','vHLkV','40243MVXHUl','15864EiUVyq','sender','oGCiJ','8OiPhtm','owner','qEQRi','toISOString','FctRL','key','mGhHz','YHSPV','kKPmM','MlPTu','message','2827235YnLzTJ','findIndex','TIblc','5xlPYkE','504318LLaUpR','contact.json','_participants.json','iaDec','subjectTime','isCommunityAnnounce','rDKTj','now','jiwdj','RupJC','size','timestamp','IHmge','zJiXD','UfGWh','parse','TGNeu','CMEUd','sAvwF'];a0_0x3934=function(){return _0x266032;};return a0_0x3934();}module[a0_0x39b937(0xa9)]={'saveContact':saveContact,'loadMessage':loadMessage,'getName':getName,'getChatSummary':getChatSummary,'saveGroupMetadata':saveGroupMetadata,'getGroupMetadata':getGroupMetadata,'saveMessageCount':saveMessageCount,'getInactiveGroupMembers':getInactiveGroupMembers,'getGroupMembersMessageCount':getGroupMembersMessageCount,'saveMessage':saveMessageV2};